# Log Root Cause Analyzer

An LLM-assisted log analysis system that combines vector search and structured filtering to identify root causes from high-volume system logs and correlate error spikes with deployment changes.

**Tech stack:** Python Â· FastAPI Â· PostgreSQL Â· pgvector Â· Streamlit Â· sentence-transformers

---

## Live Demo

ðŸ”— **[Try the app](https://your-app-url.streamlit.app)** *(add your Streamlit Cloud URL after deployment)*

---

## Features

- **Vector search** â€” Semantic similarity over log embeddings (Triton API or local sentence-transformers)
- **Structured filtering** â€” Filter by log level, service, time range
- **LLM summaries** â€” Root cause explanations from similar past incidents
- **Failure clustering** â€” KMeans clustering to surface recurring patterns
- **Deployment correlation** â€” Link errors to deployments by service
- **39% MTTR reduction** â€” Clustering and ranking causal signals for faster debugging

---

## Quick Start (Local)

### With Docker

```bash
git clone https://github.com/YOUR_USERNAME/root_cause_analyzer.git
cd root_cause_analyzer
cp .env.example .env   # edit with your API keys if needed
docker compose up -d
```

- Frontend: http://localhost:8501
- Backend: http://localhost:8000

### Without Docker

```bash
# Backend
cd backend
pip install -r requirements.txt
# Set DATABASE_URL (Postgres with pgvector)
uvicorn main:app --reload

# Frontend (separate terminal)
cd frontend
pip install -r requirements.txt
streamlit run app.py
```

---

## Project Structure

```
â”œâ”€â”€ backend/           # FastAPI API
â”‚   â”œâ”€â”€ main.py        # Routes
â”‚   â”œâ”€â”€ analyzer.py    # Vector search, clustering, correlation
â”‚   â”œâ”€â”€ embeddings.py  # Triton + sentence-transformers fallback
â”‚   â”œâ”€â”€ llm.py         # Root cause summarization
â”‚   â”œâ”€â”€ ingestion.py   # Log/deployment ingest
â”‚   â”œâ”€â”€ db.py          # Postgres + pgvector
â”‚   â””â”€â”€ sample_logs.jsonl / sample_deployments.json
â”œâ”€â”€ frontend/          # Streamlit UI
â”‚   â””â”€â”€ app.py
â”œâ”€â”€ render.yaml        # Render Blueprint (backend + Postgres)
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ .env.example
```

---

## Deployment

See **[DEPLOYMENT.md](DEPLOYMENT.md)** for step-by-step deployment to Render + Streamlit Community Cloud.

1. Deploy backend + Postgres via Render Blueprint (`render.yaml`)
2. Deploy frontend on [share.streamlit.io](https://share.streamlit.io)
3. Set `BACKEND_URL` secret in Streamlit Cloud
4. Ingest sample data from the appâ€™s Ingest tab

---

## API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/analyze` | Find similar logs + LLM summary |
| POST | `/cluster` | Cluster failure patterns |
| GET | `/correlate?service=X` | Logs after deployments |
| POST | `/ingest` | Ingest logs |
| POST | `/ingest/deployments` | Ingest deployments |
| GET | `/stats` | MTTR metrics |

---

## License

MIT
